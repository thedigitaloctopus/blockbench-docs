<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Undo - Blockbench</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Undo";
    var mkdocs_page_input_path = "undo.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Blockbench</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Getting Started</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../plugin/">Plugin</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../blockbench/">Blockbench</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ui/">Interface</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../formats/">Formats</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../actions/">Actions</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../menu/">Menu</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../property/">Properties</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Undo</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#creating-an-undo-point">Creating an undo point</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#undoinitedit-aspects">Undo.initEdit( aspects )</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#undofinishedit-edit_name-aspects">Undo.finishEdit( edit_name[, aspects] )</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#aspects">Aspects</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example">Example</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../modes/">Modes</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../outliner/">Outliner</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../textures/">Textures</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../preview/">Preview</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../utility/">Utility</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../theme/">Theme</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Blockbench</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Undo</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="undo">Undo</h1>
<h2 id="creating-an-undo-point">Creating an undo point</h2>
<p>When modifying elements, textures, animations or anything else about the model, the changes need to be registered to the Undo system. This will a) create an Undo point to allow the user to undo the changes and b) synchronize the model to other users in an Edit Session. This can be achieved using Undo.initEdit and finishEdit.</p>
<h4 id="undoinitedit-aspects">Undo.initEdit( aspects )</h4>
<p>Initializes an edit. Call this when you are about to do an edit, before changing anything.</p>
<ul>
<li><code>aspects</code>. Which aspects of the model to save. See <a href="#aspects">#Aspects</a></li>
</ul>
<h4 id="undofinishedit-edit_name-aspects">Undo.finishEdit( edit_name[, aspects] )</h4>
<p>Wraps up and saves an edit. Call this function after doing your edit.</p>
<ul>
<li><code>action_name</code> Name of the performed edit.</li>
<li><code>aspects</code> Optional. If the set of aspects you are editing has changed, provide the changed aspects.</li>
</ul>
<h2 id="aspects">Aspects</h2>
<p>Aspects are used to tell Blockbench which parts of the model to save in an undo point. All aspects are within one <code>aspects</code> object. When adding or removing elements, textures etc., make sure the objects in question are stated in the first but not in the second aspects, or vice versa.</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>selection</td>
<td>If true, the element and group selection will be saved</td>
<td><code>{selection: true}</code></td>
</tr>
<tr>
<td>elements</td>
<td>Array of all elements (cubes and locators) to save.</td>
<td><code>{elements: [cube1, cube2, locator]}</code></td>
</tr>
<tr>
<td>outliner</td>
<td>If true, the complete outliner structure will be saved. This includes group data like names etc.</td>
<td><code>{outliner: true}</code></td>
</tr>
<tr>
<td>group</td>
<td>A single group.</td>
<td><code>{group: Group.selected}</code></td>
</tr>
<tr>
<td>textures</td>
<td>An array of textures.</td>
<td><code>{textures: [texture]}</code></td>
</tr>
<tr>
<td>bitmap</td>
<td>If true, the content of the listed textures will be saved.</td>
<td><code>{textures: [texture], bitmap: true}</code></td>
</tr>
<tr>
<td>uv_mode</td>
<td>When true, saves the current UV mode and project resolution settings.</td>
<td><code>{uv_mode: true}</code></td>
</tr>
<tr>
<td>animations</td>
<td>Array of animations</td>
<td><code>{animations: [Animator.selected]}</code></td>
</tr>
<tr>
<td>keyframes</td>
<td>Array of animation keyframes</td>
<td><code>{keyframes: [keyframe]}</code></td>
</tr>
<tr>
<td>display_slots</td>
<td>Array of display slot ids</td>
<td><code>{display_slots: ['thirdperson_righthand', 'head']}</code></td>
</tr>
<tr>
<td>uv_only</td>
<td>If true, only UV and face information of cubes will be saved.</td>
<td><code>{elements. Cube.selected, uv_only: true}</code></td>
</tr>
</tbody>
</table>
<h2 id="example">Example</h2>
<pre><code class="javascript">Undo.initEdit({elements: []});

var new_cube = new Cube({name: 'kevin'}).init();
var other_cube = new Cube({name: 'lars'}).init();

Undo.finishEdit('add new cubes', {elements: [new_cube, other_cube]});
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../modes/" class="btn btn-neutral float-right" title="Modes">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../property/" class="btn btn-neutral" title="Properties"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../property/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../modes/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
